<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="author" content="" />
	<meta name="description" content="" />
	
	<title>MIDIRouter</title>
	
	<script>document.documentElement.className = 'js';</script>
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
	
	<link rel="icon" type="image/png" href="images/favicon.png" />
	<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
	
	<!--link rel="stylesheet" href="/css/bolt.normalise.css" />
	<link rel="stylesheet" href="/css/bolt.typography.css" />
	<link rel="stylesheet" href="/css/bolt.typography.15_24.css" />
	<link rel="stylesheet" href="/css/bolt.forms.css" />
	<link rel="stylesheet" href="/css/bolt.classes.css" /-->

	<link rel="stylesheet" href="css/bolt.css" />
	<link rel="stylesheet" href="css/midi.css" />
	<link rel="stylesheet" href="css/midi-graph.css" />
</head>

<body>
	<h1>MIDI</h1>

	<ul class="link-index index">
		<li>repo: <a href="http://github.com/stephband/midi">github.com/stephband/midi</a></li>
		<!--li>author: <a href="https://cruncher.ch/en/about-us/">stephband</a></li-->
	</ul>

	<canvas class="midi-graph block" id="midi-graph" width="960"></canvas>

	<script src="js/midi.js"></script>
	<script src="js/midi.log.js"></script>
	<script src="js/midi.input.js"></script>
	<script src="js/midi.output.js"></script>
	<script src="js/midi.filter.js"></script>
	<script src="js/midi.modify.js"></script>
	<script src="js/midi.graph.js"></script>
	<script src="js/midi.out-array.js"></script>
	<!--script src="js/test.js"></script-->

	<p class="block">
		This example takes midi events from all inputs, filters them to
		<code>noteon</code>, <code>noteoff</code> and <code>pitch</code>
		messages, draws the result on a canvas and outputs as midi events and
		OSC-normalised arrays. The arrays are recorded in <code>tape</code>:
	</p>

	<script class="block">
var tape = [];
	
MIDI()
.input()
.filter({ message: /^note|^pitch/ })
.graph({
    canvas: document.getElementById('midi-graph')
})
.out(function(e) {
    console.log(e.data);
})
.outArray(function(message) {
    console.log(message);
    tape.push(message);
});
	</script>
	
	<p>Open the console to see what you've recorded:</p>
	<pre><code>console.log(tape)</code></pre>
</body>
</html>
